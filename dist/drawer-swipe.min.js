!function(e,n){"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?module.exports=n():e.DrawerSwipe=n()}(this,function(){var u,e=function(e,n){var s=this;s.percent=0,s.lastTouch=null,s._buffer=[],s._bufferLength=5,s._distanceX=0,s.closeInProgress=!1,s.positionThreshold=60,s.speedThreshold=30,s.minimumSpeed=20,s.minimumPercentageThreshold=5,s.direction=e,s.beganPan=!1,s.getWidth=function(){return 0},s.onPanStart=function(){return!0},s.onPan=function(){return!0},s.onCompleteSwipe=function(){},s.onIncompleteSwipe=function(){},s.applyChanges=function(){},n.addEventListener("touchmove",function(e){var n=e.touches[0];if(s.onPanStart(e)){if(s.lastTouch){var t=n.screenX-s.lastTouch.screenX;s._distanceX+=t,s.addBuffer(t),s.pan(s._distanceX),s.beganPan=!0}s.lastTouch=n}}),n.addEventListener("touchend",function(e){s.lastTouch=null,s._distanceX=0;var n=Math.max.apply(null,s._buffer),t=Math.min.apply(null,s._buffer);s._buffer.length=0;var i=s.direction&DrawerSwipeDirection.LEFT_TO_RIGHT,r=s.direction&DrawerSwipeDirection.RIGHT_TO_LEFT,a=i&&n>=s.speedThreshold,o=r&&t<=-s.speedThreshold;Math.abs(s.percent)>=s.positionThreshold||a||o?s.animate({maxValue:a&&n,minValue:o&&t}):s.beganPan&&s.animate(null,!0)})};return u=window.requestAnimationFrame||window.setImmediate||function(e){return setTimeout(e,0)},e.prototype={addBuffer:function(e){var n=this._buffer,t=this._bufferLength;n.unshift(e)>t&&(n.length=t)},pan:function(e){var n=this;if(!n.closeInProgress)if(n.onPan(e)){var t=n.getWidth(),i=n.direction&DrawerSwipeDirection.LEFT_TO_RIGHT,r=n.direction&DrawerSwipeDirection.RIGHT_TO_LEFT,a=Math.round(e/t*100);i&&0<a||r&&a<0||(a=0),a!=n.percent&&Math.abs(a)>=n.minimumPercentageThreshold&&(100<=Math.abs(a)?n.animate():(n.applyChanges(a),n.percent=a))}else n.reset()},animate:function(a,o,e){var s=this,c=s.getWidth();e&&(s.closeInProgress=!1,s.percent=s.direction==DrawerSwipeDirection.LEFT_TO_RIGHT?100:-100),s.closeInProgress||(u?(s.closeInProgress=!0,u(function e(){var n=0,t=s.direction&DrawerSwipeDirection.LEFT_TO_RIGHT,i=s.direction&DrawerSwipeDirection.RIGHT_TO_LEFT;a&&a.maxValue?n=Math.max(a.maxValue/3,s.minimumSpeed)/c*100:a&&a.minValue?n=Math.min(a.minValue/3,-s.minimumSpeed)/c*100:t?n=s.minimumSpeed/c*(o?-100:100):i&&(n=-s.minimumSpeed/c*(o?-100:100)),s.percent+=n;var r=s.percent;t&&100<=r?r=100:i&&r<=-100?r=-100:o&&(t&&r<=0?r=0:i&&0<=r&&(r=0)),s.percent=r,s.applyChanges(r),100==Math.abs(r)?(s.reset(),s.onCompleteSwipe()):0==r?(s.reset(),s.onIncompleteSwipe()):u(e)})):(s.onCompleteSwipe(),s.reset()))},reset:function(){this.beganPan=!1,this.closeInProgress=!1}},e.Direction={LEFT_TO_RIGHT:1,LTR:1,RIGHT_TO_LEFT:2,RTL:2,BOTH:3},e});