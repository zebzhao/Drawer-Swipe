!function(e,n){"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?module.exports=n():e.DrawerSwipe=n()}(this,function(){var s,d=function(e,n){var u=this;u.percent=0,u.lastTouch=null,u._buffer=[],u._bufferLength=5,u._distanceX=0,u.closeInProgress=!1,u.positionThreshold=60,u.speedThreshold=30,u.minimumSpeed=20,u.minimumPercentageThreshold=5,u.direction=e,u.beganPan=!1,u.getWidth=function(){return 0},u.onPanStart=function(){return!0},u.onPan=function(){return!0},u.onSwipe=function(){return!0},u.onCompleteSwipe=function(){},u.onIncompleteSwipe=function(){},u.applyChanges=function(){},n.addEventListener("touchmove",function(e){var n=e.touches[0];if(u.onPanStart(e)){if(u.lastTouch){var t=n.screenX-u.lastTouch.screenX,i=n.screenY-u.lastTouch.screenY;u._distanceX+=t,u.addBuffer(t,i),u.pan(u._distanceX),u.beganPan=!0}u.lastTouch=n}}),n.addEventListener("touchend",function(e){u.lastTouch=null,u._distanceX=0;var n=u._buffer,t=n.filter(function(e){return Math.abs(Math.atan2(e.dy,e.dx))<Math.PI/10}).map(function(e){return e.dx}).reduce(function(e,n){return e<n?n:e},0),i=n.filter(function(e){return Math.abs(Math.atan2(e.dy,e.dx))>9*Math.PI/10}).map(function(e){return e.dx}).reduce(function(e,n){return n<e?n:e},0);u._buffer.length=0;var r=u.direction&d.Direction.LTR,o=u.direction&d.Direction.RTL,a=r&&t>=u.speedThreshold,c=o&&i<=-u.speedThreshold;u.onSwipe()&&(Math.abs(u.percent)>=u.positionThreshold||a||c)?u.animate({maxValue:a&&t,minValue:c&&i}):u.beganPan&&u.animate(null,!0)})};return s=window.requestAnimationFrame||window.setImmediate||function(e){return setTimeout(e,0)},d.prototype={addBuffer:function(e,n){var t=this._buffer,i=this._bufferLength;t.unshift({dx:e,dy:n})>i&&(t.length=i)},pan:function(e){var n=this;if(!n.closeInProgress)if(n.onPan(e)){var t=n.getWidth(),i=n.direction&d.Direction.LTR,r=n.direction&d.Direction.RTL,o=Math.round(e/t*100);i&&0<o||r&&o<0||(o=0),o!=n.percent&&Math.abs(o)>=n.minimumPercentageThreshold&&(100<=Math.abs(o)?n.animate():(n.applyChanges(o),n.percent=o))}else n.reset()},animate:function(o,a,e){var c=this,u=c.getWidth();e&&(c.closeInProgress=!1,c.percent=c.direction==d.Direction.LTR?100:-100),c.closeInProgress||(s?(c.closeInProgress=!0,s(function e(){var n=0,t=c.direction&d.Direction.LTR,i=c.direction&d.Direction.RTL;o&&o.maxValue?n=Math.max(o.maxValue/3,c.minimumSpeed)/u*100:o&&o.minValue?n=Math.min(o.minValue/3,-c.minimumSpeed)/u*100:t?n=c.minimumSpeed/u*(a?-100:100):i&&(n=-c.minimumSpeed/u*(a?-100:100)),c.percent+=n;var r=c.percent;t&&100<=r?r=100:i&&r<=-100?r=-100:a&&(t&&r<=0?r=0:i&&0<=r&&(r=0)),c.percent=r,c.applyChanges(r),100==Math.abs(r)?(c.reset(),c.onCompleteSwipe()):0==r?(c.reset(),c.onIncompleteSwipe()):s(e)})):(c.onCompleteSwipe(),c.reset()))},reset:function(){this.beganPan=!1,this.closeInProgress=!1}},d.Direction={LEFT_TO_RIGHT:1,LTR:1,RIGHT_TO_LEFT:2,RTL:2,BOTH:3},d});