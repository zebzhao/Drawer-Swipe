!function(e,n){"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?module.exports=n():e.DrawerSwipe=n()}(this,function(){var u,h=function(e,n){var s=this;s.percent=0,s.lastTouch=null,s._buffer=[],s._bufferLength=5,s._distanceX=0,s.closeInProgress=!1,s.positionThreshold=60,s.speedThreshold=30,s.minimumSpeed=20,s.minimumPercentageThreshold=5,s.direction=e,s.beganPan=!1,s.getWidth=function(){return 0},s.onPanStart=function(){return!0},s.onPan=function(){return!0},s.onCompleteSwipe=function(){},s.onIncompleteSwipe=function(){},s.applyChanges=function(){},n.addEventListener("touchmove",function(e){var n=e.touches[0];if(s.onPanStart(e)){if(s.lastTouch){var t=n.screenX-s.lastTouch.screenX;s._distanceX+=t,s.addBuffer(t),s.pan(s._distanceX),s.beganPan=!0}s.lastTouch=n}}),n.addEventListener("touchend",function(e){s.lastTouch=null,s._distanceX=0;var n=Math.max.apply(null,s._buffer),t=Math.min.apply(null,s._buffer);s._buffer.length=0;var i=s.direction&h.Direction.LTR,r=s.direction&h.Direction.RTL,o=i&&n>=s.speedThreshold,a=r&&t<=-s.speedThreshold;Math.abs(s.percent)>=s.positionThreshold||o||a?s.animate({maxValue:o&&n,minValue:a&&t}):s.beganPan&&s.animate(null,!0)})};return u=window.requestAnimationFrame||window.setImmediate||function(e){return setTimeout(e,0)},h.prototype={addBuffer:function(e){var n=this._buffer,t=this._bufferLength;n.unshift(e)>t&&(n.length=t)},pan:function(e){var n=this;if(!n.closeInProgress)if(n.onPan(e)){var t=n.getWidth(),i=n.direction&h.Direction.LTR,r=n.direction&h.Direction.RTL,o=Math.round(e/t*100);i&&0<o||r&&o<0||(o=0),o!=n.percent&&Math.abs(o)>=n.minimumPercentageThreshold&&(100<=Math.abs(o)?n.animate():(n.applyChanges(o),n.percent=o))}else n.reset()},animate:function(o,a,e){var s=this,c=s.getWidth();e&&(s.closeInProgress=!1,s.percent=s.direction==h.Direction.LTR?100:-100),s.closeInProgress||(u?(s.closeInProgress=!0,u(function e(){var n=0,t=s.direction&h.Direction.LTR,i=s.direction&h.Direction.RTL;o&&o.maxValue?n=Math.max(o.maxValue/3,s.minimumSpeed)/c*100:o&&o.minValue?n=Math.min(o.minValue/3,-s.minimumSpeed)/c*100:t?n=s.minimumSpeed/c*(a?-100:100):i&&(n=-s.minimumSpeed/c*(a?-100:100)),s.percent+=n;var r=s.percent;t&&100<=r?r=100:i&&r<=-100?r=-100:a&&(t&&r<=0?r=0:i&&0<=r&&(r=0)),s.percent=r,s.applyChanges(r),100==Math.abs(r)?(s.reset(),s.onCompleteSwipe()):0==r?(s.reset(),s.onIncompleteSwipe()):u(e)})):(s.onCompleteSwipe(),s.reset()))},reset:function(){this.beganPan=!1,this.closeInProgress=!1}},h.Direction={LEFT_TO_RIGHT:1,LTR:1,RIGHT_TO_LEFT:2,RTL:2,BOTH:3},h});